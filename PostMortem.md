# Phaser 3 Dungeon Crawler PM
Rasmus Johansson 30/05


## Inledning
Syftet med detta projekt var att skapa en simpel roguelike dungeon crawler och använda en av algoritmerna jag använt mig av till mitt gymnasiearbete. Till detta arbete använde jag mig av Phaser 3 för att bygga spelet samt även Vite för att bygga hemsidan. 

## Bakgrund
Arbetet började med att jag skapade en enkel ascii baserad kartskapare. Den var baserad på Random Walk algoritmen jag använde mig av i mitt gymnasiearbete. Jag la sedan till en enkel spelare som kunde gå i vardera vädersträck. Jag implementerade även enkel kollission med väggarna. Jag använde mig av speciella css klasser för individuella bokstäver och symboler för att ge dem färg. Problemet med detta var dock att spelet var väldigt långsamt. Jag såg till att lägga till början till vissa andra funktioner som jag senare hade planerat lägga till. Detta fungerade ungefär som en prototyp. 
Efter detta började jag porta spelet över till spelmotorn Phaser 3. Jag började med att implementera kart-skaparen samt vissa användbara funktioner. Efter detta försökte jag använda mig av tilesets för att rita upp kartan. Här stötte jag på problem då jag inte visste hur jag skulle implementera tilesetsen på rätt sätt och flera tutorials sa olika saker. Detta ledde till att jag spenderade ett tag på att försöka förstå hur saker fungerade och letade efter tutorials. Till slut hittaed jag exemplet [Phaser 3 Dungeon Generator](https://labs.phaser.io/edit.html?src=src/tilemap/dungeon%20generator.js) vilket jag använde mig av ganska mycket gällande tilesets. Detta exempel löste tileset problemet på ett ganska bra sätt och det var inte särskillt krånligt. Efter detta började jag jobba på att få spelet att visa upp rummen. Jag började med att endast rita ut golvet och väggarna utan någon hänsyn till korridorer. Jag la sedan även till kollission mellan delar av kartan och spelaren. Jag la även till en spelar karaktär som kan röra sig i åtta riktningar. Målet var att ha spelaren springa genom dessa rum och slåss mot fiender för att hitta bättre vapen och rustningar samt ta sig längre ner. Efter detta började jag se till att det fanns öppningar ifall rum i närheten. Detta fungerade relativt bra, dock stötte jag på vissa problem då jag försökte leta igenom listan av rum efter ett rum vid specifika koordinater. Lösningen till detta var att inte använda includes() då detta inte tog hänsyn till objekts egenskaper. Själva placeringen av tilesen skulle säkert även kunnat optimiserats och snyggats till lite. Just nu är det lite svårt att förstå vad som placeras var och varför. Efter detta var planen att börja jobba på fiender och combat. Jag la till en enkel fiende som för tillfället endast var en kopia av spelaren. Jag la även till ett sätt för spelaren att attackera. Detta gjorde jag genom att skapa en rektangel bredvid spelaren som ska göra skada till alla fiender den rör. Efter en kort stund försvinner den dock och spelaren måste anfalla igen. Jag stötte på vissa problem med kollissionen men jag har en aning om hur jag ska fixa detta. Problemet är att spelet inte vet vad fienden ska kollidera med då attack hitboxen endast börjar existera då spelaren attackerat, inte i create() funktionen. Detta kan jag nog fixa genom att göra hitboxen till ett enda objekt i stället för en lista av objekt. Istället för att ta bort den då attacken är klar kan den flyttas utanför spelets ramar och endast tillkallas då spelaren anfaller. 
Sedan började jag försöka hosta spelet. I början försökte jag göra detta via Glitch men det fungerade inte särskillt bra. Jag hostade istället genom Netlify genom att använda Vites build funktion. 

## Positiva Erfarenheter
Efter att ha använt phaser lite mer nu börjar det bli lite enklare att förstå hur det fungerar. Deras exempel är även ofta användbara. Skapandet av kartorna gick även väldigt bra, jag stötte inte riktigt på många problem relaterat till detta.
Det gick även ganska snabbt att få igång prototypen.
Slutligen gick hostingen ganska bra då jag såg till att builda sidan med Vite.

## Negativa Erfarenheter
Trots att Phaser börjat bli lite mer vettigt är det fortfarande ganska svårt att förstå vissa delar av det. Exempelvis är varför vissa funktioner som exempelvis kollission sker i create() funktionen istället för update(). Ett problem med deras exempel dock är att de inte förklarar särskillt mycket gällande det. Vissa delar av koden förklaras inte riktigt. 
Slutligen blev projektet lite stressigt runt slutet. Detta beror dock nog huvudsakligen på att jag hade en del rester och uppgifter jag var tvungen att få färdiga. 
Jag var även lite för ambitiös när det kom till min plannering. Jag förväntade mig att jag skulle bli klar med vissa delar på endast en eller två lektioner. I teori hade jag idéer på hur jag skulle implementera saker som combat och fiender. Men eftersom att jag inte fullt ut förstår Phaser ledde detta till problem och fördröjningar.  

## Slutsats
Som slutsats tycker jag att detta var ett roligt projekt, jag har lärt mig en del om både javascript och Phaser, tyvärr han jag inte klart med det. 
